import React, { useState, useEffect } from 'react';import {   Clock,   AlertTriangle,   Wrench,   Search,   Activity,   Navigation,   DollarSign,   ShieldCheck,   XCircle,   CheckCircle2,  ChevronDown,  ChevronUp,  Phone,  Edit2} from 'lucide-react';// Componente auxiliar para texto editávelconst EditableText = ({ value, onSave, className, multiline = false, tagName = "div" }) => {  const [isEditing, setIsEditing] = useState(false);  const [localValue, setLocalValue] = useState(value);  useEffect(() => {    setLocalValue(value);  }, [value]);  const handleBlur = () => {    setIsEditing(false);    onSave(localValue);  };  const handleKeyDown = (e) => {    if (e.key === 'Enter' && !multiline) {      handleBlur();    }  };  // Impede que o clique no input propague para o acordeão (abrir/fechar)  const handleClick = (e) => {    e.stopPropagation();    setIsEditing(true);  };  if (isEditing) {    return multiline ? (      <textarea        autoFocus        value={localValue}        onChange={(e) => setLocalValue(e.target.value)}        onBlur={handleBlur}        className={`w-full p-2 border-2 border-sky-400 rounded bg-white text-slate-800 outline-none resize-none ${className}`}        rows={4}        onClick={(e) => e.stopPropagation()}      />    ) : (      <input        autoFocus        type="text"        value={localValue}        onChange={(e) => setLocalValue(e.target.value)}        onBlur={handleBlur}        onKeyDown={handleKeyDown}        className={`w-full p-1 border-b-2 border-sky-400 bg-transparent outline-none text-slate-800 ${className}`}        onClick={(e) => e.stopPropagation()}      />    );  }  // Renderiza o elemento com a tag correta (h1, h2, p, etc) para manter SEO/Semântica  const Tag = tagName;    return (    <Tag       onClick={handleClick}       className={`cursor-pointer hover:bg-sky-50/50 hover:ring-2 hover:ring-sky-200 rounded px-1 transition-all duration-200 relative group ${className}`}      title="Clique para editar"    >      {value}      <span className="absolute -right-6 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity">        <Edit2 className="w-3 h-3 text-sky-400" />      </span>    </Tag>  );};export default function AeroFixFAQ() {  const [openIndex, setOpenIndex] = useState(null);  // Estado para os textos do cabeçalho e rodapé  const [pageContent, setPageContent] = useState({    headerTitle: "Dúvidas Frequentes",    headerSubtitle: "Transparência é nosso compromisso. Confira as respostas para as perguntas mais comuns de nossos clientes.",    ctaTitle: "Ainda tem dúvidas ou precisa de um orçamento?",    ctaText: "Nossa equipe técnica está pronta para analisar seu drone e garantir voos seguros.",    ctaButton: "Falar com Técnico no WhatsApp"  });  // Estado para a lista de FAQs  const [faqs, setFaqs] = useState([    {      question: "Quando devo fazer manutenção preventiva?",      answer: "Recomendo a cada 3 a 6 meses, dependendo do uso. Para pilotos profissionais com uso intenso, a manutenção deve ser mais frequente para garantir a segurança.",      icon: <Clock className="w-6 h-6 text-sky-600" />    },    {      question: "Meu drone caiu. O que faço?",      answer: "Pare de usar imediatamente. Quedas podem danificar motores, gimbal, placa central e sensores. Tentar voar novamente pode agravar o dano. Traga para diagnóstico o quanto antes.",      icon: <AlertTriangle className="w-6 h-6 text-red-500" />    },    {      question: "Quanto tempo leva uma manutenção?",      answer: "Varia conforme a complexidade. Reparos simples levam de 1 a 3 dias. Uma revisão completa geralmente leva de 3 a 7 dias úteis.",      icon: <Wrench className="w-6 h-6 text-slate-600" />    },    {      question: "Vocês fazem diagnóstico?",      answer: "Sim! O drone passa por um check-up completo (hardware e software) para identificar problemas físicos ocultos e falhas de sistema.",      icon: <Search className="w-6 h-6 text-sky-600" />    },    {      question: "É normal o drone tremer durante o voo?",      answer: "Não. Vibrações indicam problemas como: hélice desalinhada, motor com folga nos rolamentos, gimbal descalibrado ou sensor IMU fora do padrão.",      icon: <Activity className="w-6 h-6 text-orange-500" />    },    {      question: "Drone puxando para o lado… por quê?",      answer: "Causas comuns incluem: hélice torta ou danificada, motor perdendo potência (fraco), braço estrutural empenado ou calibração incorreta dos sensores.",      icon: <Navigation className="w-6 h-6 text-sky-600" />    },    {      question: "Quanto custa a manutenção?",      answer: "Depende da análise técnica. O orçamento detalhado é feito após o diagnóstico presencial e enviado diretamente pelo WhatsApp para sua aprovação.",      icon: <DollarSign className="w-6 h-6 text-green-600" />    },    {      question: "Vocês usam peças originais?",      answer: "Sim, sempre priorizamos peças originais. Quando não há disponibilidade no mercado, utilizamos peças de reposição de alta qualidade (OEM) com a mesma durabilidade.",      icon: <ShieldCheck className="w-6 h-6 text-sky-600" />    },    {      question: "O drone pode voar mesmo com hélice rachada?",      answer: "Pode levantar voo, mas NÃO DEVE. Hélices danificadas causam vibração excessiva e podem quebrar no ar, sendo a maior causa de quedas repentinas e perda total.",      icon: <XCircle className="w-6 h-6 text-red-500" />    },    {      question: "Qual a manutenção mais importante para evitar problemas?",      answer: "O combo essencial: Calibrações regulares (IMU/Compass), limpeza dos motores, verificação visual das hélices antes de cada voo e manter o sistema atualizado.",      icon: <CheckCircle2 className="w-6 h-6 text-green-600" />    }  ]);  const toggleAccordion = (index) => {    setOpenIndex(openIndex === index ? null : index);  };  // Função para atualizar uma pergunta ou resposta específica  const updateFaq = (index, field, newValue) => {    const newFaqs = [...faqs];    newFaqs[index][field] = newValue;    setFaqs(newFaqs);  };  // Função para atualizar textos gerais da página  const updatePageContent = (field, newValue) => {    setPageContent(prev => ({ ...prev, [field]: newValue }));  };  return (    <div className="min-h-screen bg-slate-50 font-sans text-slate-800">      {/* Header Section */}      <header className="bg-slate-900 text-white py-12 shadow-lg border-b-4 border-sky-600">        <div className="container mx-auto px-4 text-center">          <div className="flex justify-center items-center mb-4">            <div className="w-16 h-16 border-4 border-slate-400 rounded-full flex items-center justify-center mr-4 bg-slate-800 relative shadow-sky-900/50 shadow-xl shrink-0">              <div className="absolute w-12 h-12 border border-slate-500 rounded-full"></div>              <Wrench className="text-sky-500 w-8 h-8" />            </div>            <div className="text-left">              <h1 className="text-3xl font-bold tracking-wide">AeroFix <span className="text-slate-400 font-light text-xl">solutions</span></h1>              <p className="text-sky-500 text-sm uppercase tracking-widest font-semibold">Assistência Técnica Especializada</p>            </div>          </div>                    <div className="max-w-3xl mx-auto">            <EditableText               tagName="h2"              value={pageContent.headerTitle}              onSave={(val) => updatePageContent('headerTitle', val)}              className="text-2xl md:text-3xl font-bold mt-6 inline-block"            />            <div className="mt-2">              <EditableText                 tagName="p"                value={pageContent.headerSubtitle}                onSave={(val) => updatePageContent('headerSubtitle', val)}                className="text-slate-400 max-w-2xl mx-auto inline-block"                multiline={true}              />            </div>          </div>        </div>      </header>      {/* FAQ Content */}      <main className="container mx-auto px-4 py-12 max-w-4xl">        <div className="grid gap-4">          {faqs.map((faq, index) => (            <div               key={index}               className={`bg-white rounded-lg border transition-all duration-300 ${                openIndex === index                   ? 'border-sky-500 shadow-md ring-1 ring-sky-100'                   : 'border-slate-200 hover:border-slate-300 shadow-sm'              }`}            >              {/* Mudamos de <button> para <div> para permitir inputs interativos dentro do cabeçalho.                 O onClick do container abre/fecha, mas o onClick do EditableText (stopPropagation) impede isso ao editar.              */}              <div                onClick={() => toggleAccordion(index)}                className="w-full flex items-center justify-between p-5 text-left cursor-pointer select-none"              >                <div className="flex items-center gap-4 flex-1 pr-4">                  <div className={`p-2 rounded-lg shrink-0 ${openIndex === index ? 'bg-sky-50' : 'bg-slate-50'}`}>                    {faq.icon}                  </div>                  <div className="flex-1">                    <EditableText                       tagName="h3"                      value={faq.question}                      onSave={(val) => updateFaq(index, 'question', val)}                      className={`text-lg font-semibold w-full ${openIndex === index ? 'text-sky-700' : 'text-slate-700'}`}                    />                  </div>                </div>                {openIndex === index ? (                  <ChevronUp className="w-5 h-5 text-sky-500 transition-transform shrink-0" />                ) : (                  <ChevronDown className="w-5 h-5 text-slate-400 transition-transform shrink-0" />                )}              </div>                            <div                 className={`overflow-hidden transition-all duration-300 ease-in-out ${                  openIndex === index ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'                }`}              >                <div className="p-5 pt-0 pl-20 pr-10 text-slate-600 leading-relaxed border-l-4 border-sky-100 ml-5 mb-5">                   <EditableText                       tagName="div"                      multiline={true}                      value={faq.answer}                      onSave={(val) => updateFaq(index, 'answer', val)}                      className=""                    />                </div>              </div>            </div>          ))}        </div>        {/* CTA Section */}        <div className="mt-16 bg-slate-900 rounded-2xl p-8 md:p-12 text-center shadow-xl relative overflow-hidden">          <div className="absolute top-0 right-0 -mr-10 -mt-10 w-40 h-40 bg-sky-600 rounded-full opacity-20 blur-3xl"></div>          <div className="absolute bottom-0 left-0 -ml-10 -mb-10 w-40 h-40 bg-slate-500 rounded-full opacity-20 blur-3xl"></div>                    <div className="relative z-10">            <EditableText               tagName="h3"              value={pageContent.ctaTitle}              onSave={(val) => updatePageContent('ctaTitle', val)}              className="text-2xl font-bold text-white mb-4 inline-block"            />            <br />            <EditableText               tagName="p"              value={pageContent.ctaText}              onSave={(val) => updatePageContent('ctaText', val)}              className="text-slate-300 mb-8 max-w-xl mx-auto inline-block"              multiline={true}            />            <div className="flex justify-center">              <button className="inline-flex items-center gap-2 bg-sky-600 hover:bg-sky-700 text-white font-bold py-4 px-8 rounded-lg transition-colors shadow-lg hover:shadow-sky-500/30 group">                <Phone className="w-5 h-5 group-hover:animate-pulse" />                <EditableText                   tagName="span"                  value={pageContent.ctaButton}                  onSave={(val) => updatePageContent('ctaButton', val)}                  className="bg-transparent hover:bg-transparent hover:ring-0"                />              </button>            </div>          </div>        </div>      </main>      {/* Footer */}      <footer className="bg-slate-100 py-8 text-center text-slate-500 text-sm border-t border-slate-200">        <p>&copy; {new Date().getFullYear()} AeroFix Solutions. Todos os direitos reservados.</p>        <p className="mt-2">Manutenção Especializada de Drones • Peças e Serviços</p>      </footer>    </div>  );}